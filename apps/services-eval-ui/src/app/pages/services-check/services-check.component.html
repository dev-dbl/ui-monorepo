<div class="surface-ground px-4 py-5 md:px-6 lg:px-8">

<!--  <div class="col-12">-->
<!--    <services-statistics-cards [consultantStatistics]="consultantStatistics" [servicesStatistics]="servicesStatistics"></services-statistics-cards>-->
<!--  </div>-->

  <div class="col-12">
    <p-panel [header]="'Anomalies (' + countAnomalies() + ')'">
      <p-table id="anomalies-table" [value]="servicesStatistics"
               styleClass="p-datatable-striped" sortField="employee"
               dataKey="employee" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th style="width: 3rem"></th>
            <th>Employee</th>
            <th>Anomalies</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-statistic let-expanded="expanded">
          <tr>
            <td>
              <button type="button" pButton pRipple [pRowToggler]="statistic" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
            </td>
            <td>{{statistic.employee.getFullName()}}</td>
            <td>{{statistic.anomalies.length}}</td>
          </tr>
        </ng-template>

        <ng-template pTemplate="rowexpansion" let-statistic>
          <tr>
            <td colspan="11">
              <div class="p-3">
                <services-statistics-activity-table [activities]="statistic.anomalies"></services-statistics-activity-table>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-panel>
  </div>

  <div class="col-12">
    <p-panel header="Raw Data" [toggleable]="true" [collapsed]="true">
      <services-statistics-table [servicesStatistics]="servicesStatistics"></services-statistics-table>
    </p-panel>
  </div>

</div>
