<div class="grid">

  <div class="col-12">
    <services-statistics-support-cards [supportStatistics]="supportStatistics" [servicesStatistics]="servicesStatistics"></services-statistics-support-cards>
  </div>

  <div class="col-12 flex justify-content-center align-items-center">
    <p-chart type="doughnut" [data]="chartData" [options]="chartOptions" width="30vw" height="40vh"></p-chart>
  </div>

  <div class="col-12">
    <p-panel header="Raw Data" [toggleable]="true" [collapsed]="true">
      <p-table id="anomalies-table" [value]="servicesStatistics"
               styleClass="p-datatable-striped" sortField="employee"
               dataKey="employee" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th style="width: 3rem"></th>
            <th>Employee</th>
            <th>Supporttasks</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-statistic let-expanded="expanded">
          <tr>
            <td>
              <button type="button" pButton pRipple [pRowToggler]="statistic" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
            </td>
            <td>{{statistic.employee}}</td>
            <td>{{statistic.supportActivities.length}}</td>
          </tr>
        </ng-template>

        <ng-template pTemplate="rowexpansion" let-statistic>
          <tr>
            <td colspan="11">
              <div class="p-3">
                <services-statistics-activity-table [activities]="statistic.supportActivities"></services-statistics-activity-table>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-panel>
  </div>

</div>
